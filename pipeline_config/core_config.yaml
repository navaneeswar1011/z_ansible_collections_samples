vault_keys:                       #section for secrets
  - name: ec_host
    type: host
  - name: ec_user
    type: user
  - name: ec_ssh
    type: ssh

ansible_environment:
  inventory: zos_concepts/zos_ping/inventories/inventory.yml
  ansible_cfg: zos_concepts/zos_ping/ansible.cfg
  host_vars: pipeline_config/inventories/host_vars
  group_vars: pipeline_config/inventories/group_vars
  collections:
    - ibm.ibm_zos_core

stages:
  - name: Ping the EC
    description: "Test the ssh connection to EC using ping"
    playbooks:
      - zos_concepts/zos_ping/zos_ping.yaml
      - zos_concepts/zos_ping/zos_ping.yaml
    cleanup:
      - zos_concepts/zos_ping/zos_ping.yaml
    validation:
      - zos_concepts/zos_ping/zos_ping.yaml

  - name: Test datasets
    description: "Test the datasets playbook"
    playbooks:
      - zos_concepts/data_sets/data_set_basics/data_set_basics.yml
